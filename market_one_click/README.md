# Разработка решения, позволяющего персонализировать предложения постоянным клиентам компании "В один клик" для увеличения их покупательской активности.

## Описание проекта
Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность постоянных клиентов. Сделать это можно с помощью персонализированных предложений.
«В один клик» — современная компания, поэтому её руководство не хочет принимать решения просто так — только на основе анализа данных и бизнес-моделирования. У компании есть небольшой отдел цифровых технологий, и вам предстоит побыть в роли стажёра в этом отделе. 
Итак, вашему отделу поручили разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.

## Описание данных

***Предоставлены данные в нескольких таблицах:***

`market_file.csv`  
***Таблица, которая содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.***    
-   `id` — номер покупателя в корпоративной базе данных.
-   `Покупательская активность` — рассчитанный класс покупательской активности (целевой признак): «снизилась» или «прежний уровень».
-   `Тип сервиса` — уровень сервиса, например «премиум» и «стандарт».
-   `Разрешить сообщать` — информация о том, можно ли присылать покупателю дополнительные предложения о товаре. Согласие на это даёт покупатель.
-   `Маркет_актив_6_мес` — среднемесячное значение маркетинговых коммуникаций компании, которое приходилось на покупателя за последние 6 месяцев. Это значение показывает, какое число рассылок, звонков, показов рекламы и прочего приходилось на клиента.
-   `Маркет_актив_тек_мес` — количество маркетинговых коммуникаций в текущем месяце.
-   `Длительность` — значение, которое показывает, сколько дней прошло с момента регистрации покупателя на сайте.
-   `Акционные_покупки` — среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев.
-   `Популярная_категория` — самая популярная категория товаров у покупателя за последние 6 месяцев.
-   `Средний_просмотр_категорий_за_визит` — показывает, сколько в среднем категорий покупатель просмотрел за визит в течение последнего месяца.
-   `Неоплаченные_продукты_штук_квартал` — общее число неоплаченных товаров в корзине за последние 3 месяца.
-   `Ошибка_сервиса` — число сбоев, которые коснулись покупателя во время посещения сайта.
-   `Страниц_за_визит` — среднее количество страниц, которые просмотрел покупатель за один визит на сайт за последние 3 месяца.

`market_money.csv`  
***Таблица с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.***  
-   `id` — номер покупателя в корпоративной базе данных.
-   `Период` — название периода, во время которого зафиксирована выручка. Например,'текущий_месяц' или 'предыдущий_месяц'.
-   `Выручка` — сумма выручки за период.

`market_time.csv`  
***Таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.***  
-   `id` — номер покупателя в корпоративной базе данных.
-   `Период` — название периода, во время которого зафиксировано общее время.
-   `минут` — значение времени, проведённого на сайте, в минутах.

`money.csv`  
***Таблица с данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.***  
-   `id` — номер покупателя в корпоративной базе данных.
-   `Прибыль` — значение прибыли.

## Вывод:
- В данной работе была рассмотрена задача по разработке решения для интернет-магазина «В один клик», которое поможет увеличить покупательскую активность постоянных клиентов через персонализированные предложения. Для была предсказана вероятность снижения покупательской активности клиента в следующие три месяца, выделен сегмент покупателей `уходящий_скидочник` и разработаны для них персонализированные предложения.
- Был проведен предварительный анализ данных в ходе которого получили:
    - В датафреймах отсвутствуют пропуски;
    - Название столбцов датафреймов необходимо привести к snake_case;
    - Нет ошибок в типах данных в датафреймах;
    - Столбцы id в датафреймах сделали значениями индексов;
    - Была получена общая информация о датафреймах.
- Была проведена предобработка данных:
    - Приведены названия столбцов датафреймов к snake_case;
    - Проверены датафреймы на дубликаты и выявлено их отсутствие.
- Был выполнен исследовательский анализ данных (пункт 3);
- Было проведено объедение данных датафреймов: market_file, market_money и market_time, для клиентов с наличием покупок в 3-х последних месяцах;
- Был проведен корреляционный анализ данных (пункт 5);
- **Была выполнена задача классификации с использованием метода пайплайнов в МО**. В результате было получено:
    - В результате выполнения моделирования, была выбрана лучшая модель и её параметры. Лучшей моделью стала - `SVC` (C=0.1, gamma=0.1, probability=True, random_state=42) и ядром `rbf`, количественные данные которой были закодированы методом `StandardScaler()`, а категориальные `OneHotEncoder()` и `OrdinalEncoder()`. 
    Метрика ROC-AUC лучшей модели на тренировочной выборке (0.9121): Это показывает, что модель хорошо обучилась на тренировочных данных и смогла уловить большую часть закономерностей в данных.
    Метрика ROC-AUC на тестовой выборке (0.9112).
- Был проведен анализ влияния входных признаков на целевой (`покупательская_активность`) используя метод SHAP:
    - Входные признаки, `num__страниц_за_визит`, `num__минут_предыдущий_месяц` и `num__минут_текущий_месяц`, являются наиболее значимыми, так как они имеют наибольшее влияние на `покупательскую_активность`.   
    Входные признаки, `ohe__популярная_категория...` (кроме бытовой техники и электроники), `ohe__тип_сервиса_стандарт` и `ohe__разрешить_сообщать_нет` не имеют  влияние и могут быть менее важными для модели.   
    Данные по значимости признаков помогут определить бизнесу какие факторы влияют на сохранение активности покупателя на сайте. Так из данных выше можно сделать вывод, что время проведенное на сайте сильнее всего влияет на активность клиента, а следовательно и на прибыль магазина. Это можно объяснить тем, что у пользователя есть большой выбор товаров для покупки. И ему не нужно искать другие способы покупки необходимого ему товара (например на другом сайте).
- Была выполнена сегментация клиентов интернет-магазина «В один клик». Они характеризуются меньшим временем на сайте, узкой фокусировкой на товарах со скидками и большим количеством неоплаченных товаров. Для 
